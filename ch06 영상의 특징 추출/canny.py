'''
03 ìºë‹ˆ ì—ì§€ ê²€ì¶œ

ì¢‹ì€ ì—ì§€ ê²€ì¶œê¸°ì˜ ì¡°ê±´ (J. Canny)
- ì •í™•í•œ ê²€ì¶œ(Good detection): ì—ì§€ê°€ ì•„ë‹Œ ì ì„ ì—ì§€ë¡œ ì°¾ê±°ë‚˜ ë˜ëŠ” ì—ì§€ì¸ë° ì—ì§€ë¡œ ì°¾ì§€ ëª»í•˜ëŠ” í™•ë¥ ì„ ìµœì†Œí™”
- ì •í™•í•œ ìœ„ì¹˜(Good localization): ì‹¤ì œ ì—ì§€ì˜ ì¤‘ì‹¬ì„ ê²€ì¶œ
- ë‹¨ì¼ ì—ì§€(Single edge): í•˜ë‚˜ì˜ ì—ì§€ëŠ” í•˜ë‚˜ì˜ ì ìœ¼ë¡œ í‘œí˜„

ìºë‹ˆ ì—ì§€ ê²€ì¶œ ë‹¨ê³„
- ê°€ìš°ì‹œì•ˆ í•„í„°ë§ -> ê·¸ë˜ë””ì–¸íŠ¸ ê³„ì‚°(í¬ê¸°&ë°©í–¥) -> ë¹„ìµœëŒ€ ì–µì œ -> ì´ì¤‘ ì„ê³„ê°’ì„ ì´ìš©í•œ íˆìŠ¤í…Œë¦¬ì‹œìŠ¤ ì—ì§€ íŠ¸ë˜í‚¹

ìºë‹ˆ ì—ì§€ ê²€ì¶œ 1ë‹¨ê³„
- ê°€ìš°ì‹œì•ˆ í•„í„°ë§ (Optional) ì¡ìŒ ì œê±° ëª©ì 

ìºë‹ˆ ì—ì§€ ê²€ì¶œ 2ë‹¨ê³„
- ê·¸ë˜ë””ì–¸íŠ¸ ê³„ì‚° (ì£¼ë¡œ ì†Œë²¨ ë§ˆìŠ¤í¬ë¥¼ ì‚¬ìš©)

ìºë‹ˆ ì—ì§€ ê²€ì¶œ 3ë‹¨ê³„
- ë¹„ìµœëŒ€ ì–µì œ (Non-maximum suppression)
- í•˜ë‚˜ì˜ ì—ì§€ê°€ ì—¬ëŸ¬ ê°œì˜ í”½ì…€ë¡œ í‘œí˜„ë˜ëŠ” í˜„ìƒì„ ì—†ì• ê¸° ìœ„í•˜ì—¬ ê·¸ë˜ë””ì–¸íŠ¸ í¬ê¸°ê°€ êµ­ì§€ì  ìµœëŒ€ (local maximum)ì¸ í”½ì…€ë§Œì„ ì—ì§€ í”½ì…€ë¡œ ì„¤ì •
- ê·¸ë˜ë””ì–¸íŠ¸ ë°©í–¥ì— ìœ„ì¹˜í•œ ë‘ ê°œì˜ í”½ì…€ì„ ì¡°ì‚¬í•˜ì—¬ êµ­ì§€ì  ìµœëŒ€ë¥¼ ê²€ì‚¬

ìºë‹ˆ ì—ì§€ ê²€ì¶œ 4ë‹¨ê³„
- íˆìŠ¤í…Œë¦¬ì‹œìŠ¤ ì—ì§€ íŠ¸ë˜í‚¹ (Hysteresis edge tracking)
- ë‘ ê°œì˜ ì„ê³„ê°’ì„ ì‚¬ìš©: TLow , THigh
- ê°•í•œ ì—ì§€: ğ‘“ â‰¥ ğ‘‡ğ»ğ‘–ğ‘”â„ -> ìµœì¢… ì—ì§€ë¡œ ì„ ì •
- ì•½í•œ ì—ì§€: ğ‘‡ğ¿ğ‘œğ‘¤ â‰¤ ğ‘“ < ğ‘‡ğ»ğ‘–ğ‘”â„
-> ê°•í•œ ì—ì§€ì™€ ì—°ê²°ë˜ì–´ ìˆëŠ” í”½ì…€ë§Œ ìµœì¢… ì—ì§€ë¡œ ì„ ì •

ìºë‹ˆ ì—ì§€ ê²€ì¶œ í•¨ìˆ˜
cv2.Canny(image, threshold1, threshold2, edges=None, apertureSize=None, L2gradient=None) -> edges
- image: ì…ë ¥ ì˜ìƒ
- threshold1: í•˜ë‹¨ ì„ê³„ê°’
- threshold2: ìƒë‹¨ ì„ê³„ê°’
- edges: ì—ì§€ ì˜ìƒ
- apertureSize: ì†Œë²¨ ì—°ì‚°ì„ ìœ„í•œ ì»¤ë„ í¬ê¸°. ê¸°ë³¸ê°’ì€ 3.
- L2gradient: Trueì´ë©´ L2 norm ì‚¬ìš©, Falseì´ë©´ L1 norm ì‚¬ìš©. ê¸°ë³¸ê°’ì€ False. (Trueë¥¼ ì‚¬ìš©í•˜ë©´ ë” ì •í™•í•œ ê°’ì„ ì–»ìŒ.)

ì°¸ê³ ì‚¬í•­
- threshold1:threshold2 = 1:2 ë˜ëŠ” 1:3ì„ ìì£¼ ì“°ì§€ë§Œ ì˜ìƒì— ë”°ë¼ ì ë‹¹í•œ ê°’ìœ¼ë¡œ ë°”ë€” ìˆ˜ ìˆë‹¤.
'''

import sys
import numpy as np
import cv2

src = cv2.imread('img/building.jpg', cv2.IMREAD_GRAYSCALE)

if src is None:
    print('Image load failed!')
    sys.exit()

dst = cv2.Canny(src, 50, 150)  # thresholdë¥¼ ì ì ˆíˆ ì£¼ëŠ” ê²ƒì´ ì¤‘ìš”í•˜ë‹¤.

cv2.imshow('src', src)
cv2.imshow('dst', dst)
cv2.waitKey()

cv2.destroyAllWindows()
